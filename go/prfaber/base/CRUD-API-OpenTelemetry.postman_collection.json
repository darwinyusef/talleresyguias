{
	"info": {
		"_postman_id": "a1b2c3d4-e5f6-4a5b-8c9d-0e1f2a3b4c5d",
		"name": "CRUD API with OpenTelemetry",
		"description": "Colección de Postman para probar la API CRUD con Fiber y OpenTelemetry.\n\n## Endpoints disponibles:\n- GET / - Info de la API\n- GET /api/v1/items - Listar todos los items\n- GET /api/v1/items/:id - Obtener un item por ID\n- POST /api/v1/items - Crear nuevo item\n- PUT /api/v1/items/:id - Actualizar item\n- DELETE /api/v1/items/:id - Eliminar item\n\n## Configuración:\n- Base URL: http://localhost:3000\n- Headers: Content-Type: application/json",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "12345678"
	},
	"item": [
		{
			"name": "Health Check",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Response has message\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('message');",
							"    pm.expect(jsonData).to.have.property('version');",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/",
					"host": [
						"{{base_url}}"
					],
					"path": [
						""
					]
				},
				"description": "Verifica que la API está corriendo correctamente"
			},
			"response": []
		},
		{
			"name": "Listar Todos los Items",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Response is array\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.be.an('array');",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/api/v1/items",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"v1",
						"items"
					]
				},
				"description": "Obtiene todos los items de la base de datos ordenados por ID descendente"
			},
			"response": []
		},
		{
			"name": "Crear Item - Laptop",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 201\", function () {",
							"    pm.response.to.have.status(201);",
							"});",
							"",
							"pm.test(\"Item created with ID\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('id');",
							"    pm.expect(jsonData).to.have.property('name');",
							"    pm.expect(jsonData).to.have.property('description');",
							"    pm.expect(jsonData).to.have.property('created_at');",
							"    ",
							"    // Guardar el ID para usar en otros requests",
							"    pm.collectionVariables.set(\"item_id\", jsonData.id);",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"name\": \"Laptop Dell XPS 15\",\n    \"description\": \"Laptop de alto rendimiento con procesador Intel i7, 16GB RAM, 512GB SSD\"\n}"
				},
				"url": {
					"raw": "{{base_url}}/api/v1/items",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"v1",
						"items"
					]
				},
				"description": "Crea un nuevo item en la base de datos. Automáticamente guarda el ID en variable de colección."
			},
			"response": []
		},
		{
			"name": "Crear Item - Mouse",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 201\", function () {",
							"    pm.response.to.have.status(201);",
							"});",
							"",
							"pm.test(\"Item created\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.name).to.eql(\"Mouse Logitech MX Master 3\");",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"name\": \"Mouse Logitech MX Master 3\",\n    \"description\": \"Mouse inalámbrico ergonómico con 7 botones personalizables\"\n}"
				},
				"url": {
					"raw": "{{base_url}}/api/v1/items",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"v1",
						"items"
					]
				},
				"description": "Crear otro item de ejemplo"
			},
			"response": []
		},
		{
			"name": "Crear Item - Teclado",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 201\", function () {",
							"    pm.response.to.have.status(201);",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"name\": \"Teclado Mecánico Keychron K8\",\n    \"description\": \"Teclado mecánico inalámbrico con switches Gateron Brown, layout español\"\n}"
				},
				"url": {
					"raw": "{{base_url}}/api/v1/items",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"v1",
						"items"
					]
				},
				"description": "Crear tercer item de ejemplo"
			},
			"response": []
		},
		{
			"name": "Obtener Item por ID",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Item has correct structure\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('id');",
							"    pm.expect(jsonData).to.have.property('name');",
							"    pm.expect(jsonData).to.have.property('description');",
							"    pm.expect(jsonData).to.have.property('created_at');",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/api/v1/items/{{item_id}}",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"v1",
						"items",
						"{{item_id}}"
					]
				},
				"description": "Obtiene un item específico usando el ID guardado en variable de colección"
			},
			"response": []
		},
		{
			"name": "Actualizar Item",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Item updated\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.name).to.include(\"ACTUALIZADO\");",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"name\": \"Laptop Dell XPS 15 ACTUALIZADO\",\n    \"description\": \"Laptop actualizada con 32GB RAM y 1TB SSD\"\n}"
				},
				"url": {
					"raw": "{{base_url}}/api/v1/items/{{item_id}}",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"v1",
						"items",
						"{{item_id}}"
					]
				},
				"description": "Actualiza un item existente usando el ID guardado"
			},
			"response": []
		},
		{
			"name": "Eliminar Item",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Item deleted\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('message');",
							"    pm.expect(jsonData.message).to.include('deleted');",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "DELETE",
				"header": [],
				"url": {
					"raw": "{{base_url}}/api/v1/items/{{item_id}}",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"v1",
						"items",
						"{{item_id}}"
					]
				},
				"description": "Elimina un item usando el ID guardado"
			},
			"response": []
		},
		{
			"name": "Intentar Obtener Item Eliminado (404)",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 404\", function () {",
							"    pm.response.to.have.status(404);",
							"});",
							"",
							"pm.test(\"Error message present\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('error');",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/api/v1/items/{{item_id}}",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"v1",
						"items",
						"{{item_id}}"
					]
				},
				"description": "Intenta obtener un item que ya fue eliminado, debe retornar 404"
			},
			"response": []
		},
		{
			"name": "Crear Item con Body Inválido (400)",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 400\", function () {",
							"    pm.response.to.have.status(400);",
							"});",
							"",
							"pm.test(\"Error message present\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('error');",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"invalid_field\": \"esto no es válido\"\n}"
				},
				"url": {
					"raw": "{{base_url}}/api/v1/items",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"v1",
						"items"
					]
				},
				"description": "Prueba de validación: envía un JSON sin los campos requeridos"
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:3000",
			"type": "string"
		},
		{
			"key": "item_id",
			"value": "1",
			"type": "string"
		}
	]
}
